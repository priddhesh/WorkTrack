<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="/scripts/applications.js" defer></script>
</head>

<body>
    <table class="table" style="background-color: hsl(0, 0%, 96%);">
        <thead style="background-color: rgb(179, 179, 253);">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Reason</th>
                <th scope="col">From</th>
                <th scope="col">To</th>
                <th scope="col">Status</th>
                <th scope="col"></th>
                <th scope="col"></th>
            </tr>
        </thead>
        <tbody>
            <% let i=0; if(data.length>0)
                {
                data.forEach(function(item){
                i++;
                %>
                <tr>
                    <td id="<%=i%>">
                        <%= i %>
                    </td>
                    <td id="reason<%=i%>">
                        <%= item.reason %>
                    </td>
                    <td id="from<%=i%>">
                        <%= item.from_date.toString().substring(0,15) %>
                    </td>
                    <td id="to<%=i%>">
                        <%= item.to_date.toString().substring(0,15) %>
                    </td>
                    <td id="status<%=i%>">
                        <%= item.status %>
                    </td>
                    <td>
                        <button id="update<%=i%>" type="submit" data-toggle="modal"
            data-target=".bd-example-modal-lg0000" onclick="applicationInfo(this.id)">Update</button>
                    </td>
                    <td id="delete<%=i%>">
                        <form action="/employee/deleteApplication" method="post">
                            <input style="display: none;" type="text" name="reason" value="<%=item.reason %>">
                            <input style="display: none;" type="text" name="username" value="<%=item.username %>">
                            <button type="submit">Delete</button>
                        </form>
                    </td>
                </tr>
                <% }) }else{ %>
                    <tr>
                        <td colspan="5">No data found</td>
                    </tr>
                    <% } %>
        </tbody>
    </table>

    
    <div class="modal fade bd-example-modal-lg0000" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel1"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="myLargeModalLabel">Update Application</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">Ã—</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form action="/employee/updateApplication" method="post">
                        <div style="display: none;" class="form-group">
                            <input type="text" class="form-control" id="prevReason" name="reason">
                        </div>
                        <div class="form-group">
                            <label>Reason:</label>
                            <input type="text" class="form-control" id="ureason" name="ureason">
                        </div>
                        <div class="form-group">
                            <label>From:</label>
                            <input type="date" class="form-control" id="ufrom" name="ufrom">
                        </div>
                        <div class="form-group">
                            <label>To:</label>
                            <input type="date" class="form-control" id="uto" name="uto">
                        </div>
                        <button type="submit" class="btn btn-primary">Update</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
</html>